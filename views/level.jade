.page-level: .page-width

    .workspace-header(ng-class='{ success: showNextBanner }')

        .inner.center(ng-if='!started')

            h3 Challenge {{ id }}: {{ levels[ id - 1 ].title }}
            h4 {{ levels[ id - 1 ].description }}
            button.button-success(ng-click='start()') Start

        .inner(ng-if='started && !showNextBanner')

            progress-circle(value='step', max='content.steps.length')
            h3 {{ levels[ id - 1 ].title }}
            h4.hint(ng-bind-html='guidance | markdown')

        .inner.center(ng-if='showNextBanner')
            h4 {{ successMessage() }}
            a.button.button-success(ng-if='hasNext', ng-href='/level/{{id + 1}}') Next &rsaquo;
            a.button.button-success(ng-if='!hasNext', ng-click='openLevelComplete()') Next &rsaquo;


        //- .drop-down
        //-     .title Challenge {{ id }}: {{ levels[ id - 1 ].title }}
        //-     .subtitle {{ levels[ id - 1 ].description }}

        //- .step-display
        //-     .title step {{ step + 1 }}
        //-     .subtitle(ng-bind-html='guidance | markdown')

    .row(ng-if='started')
        .col-6.editor-wrap

            editor(
                workspace,
                ng-model='code',
                ng-class='{ completed: completed }',
                ng-change='validate()',
                editable='!completed && started',
                start-at-line='content.startAt'
                )

        .col-6.tutorial-wrap

            display(ng-source='code', workspace, mode='"level"', ng-class='{ disabled: !started }')

            //- .actions
                a.button.workspace-action-button.reset(ng-click='code = content.code; completed = false') Reset

    include partial/level-complete